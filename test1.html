<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Green Barrier on Canvas</title>
    <style>
        canvas {
            border: 1px solid black;
        }
    </style>
</head>
<body>
<canvas id="myCanvas" width="800" height="800"></canvas>
<script>
    const projectiles = [];
    const maxProjectiles = 10;
    const projectileSpeed = 2;

    class Projectile {
        constructor(x, y, width, height, speed) {
            this.x = x;
            this.y = y;
            this.width = width;
            this.height = height;
            this.speed = speed;
        }

        update() {
            this.y += this.speed;
        }

        draw(ctx) {
            ctx.fillStyle = 'red';
            ctx.fillRect(this.x, this.y, this.width, this.height);
        }
    }

    class Block {
        constructor(x, y, width, height) {
            this.x = x;
            this.y = y;
            this.width = width;
            this.height = height;
        }

        draw(ctx) {
            ctx.fillStyle = 'green';
            ctx.fillRect(this.x, this.y, this.width, this.height);
        }

        contains(rect) {
            return rect.x < this.x + this.width &&
                rect.x + rect.width > this.x &&
                rect.y < this.y + this.height &&
                rect.y + rect.height > this.y;
        }
    }

    const canvas = document.getElementById('myCanvas');
    const ctx = canvas.getContext('2d');

    const centerX = canvas.width / 2;
    const centerY = canvas.height / 2;
    const blockSize = 50;
    const blockSpacing = 100;
    const blockPositions = [
        [centerX - blockSize - blockSpacing / 2, centerY - blockSize / 2],
        [centerX + blockSpacing / 2, centerY - blockSize / 2],
        [centerX - blockSize - blockSpacing / 2, centerY + blockSize / 2 + blockSpacing],
        [centerX + blockSpacing / 2, centerY + blockSize / 2 + blockSpacing]
    ];

    const blocks = blockPositions.map(pos => new Block(pos[0], pos[1], blockSize, blockSize));

    function update() {
        // Update projectiles
        projectiles.forEach(projectile => projectile.update());

        // Add new projectiles randomly
        if (projectiles.length < maxProjectiles && Math.random() < 0.05) {
            const x = Math.random() * (600 - 100) + 100;
            const y = 0;
            const width = 4;
            const height = 10;
            const projectile = new Projectile(x, y, width, height, projectileSpeed);
            projectiles.push(projectile);
        }

        // Check for collisions
        projectiles.forEach((projectile, index) => {
            blocks.forEach((block, blockIndex) => {
                if (block.contains(projectile)) {
                    // Remove the projectile on collision
                    projectiles.splice(index, 1);
                    // Remove the block
                    blocks.splice(blockIndex, 1);
                }
            });
        });

        // Remove projectiles that reached the bottom
        projectiles.forEach((projectile, index) => {
            if (projectile.y > canvas.height) {
                projectiles.splice(index, 1);
            }
        });

        // Draw everything
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        blocks.forEach(block => block.draw(ctx));
        projectiles.forEach(projectile => projectile.draw(ctx));

        requestAnimationFrame(update);
    }

    update();

</script>
</body>
</html>
